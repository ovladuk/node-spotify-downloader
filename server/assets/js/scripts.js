// Generated by CoffeeScript 1.10.0
(function() {
  var captchaDone, captcha_expired;

  $.fn.scrollBottom = function() {
    return $(this).scrollTop($(this)[0].scrollHeight);
  };

  $.fn.appendVal = function(TextToAppend) {
    return $(this).val($(this).val() + TextToAppend);
  };

  try {
    io.connect().on('progress', function(data) {
      $('#progress').appendVal(data.progress).scrollBottom();
      return $('#progress-box').collapse('show');
    });
  } catch (undefined) {}

  window.onRecaptchaLoaded = function() {
    debugger;
    var _captchaId;
    return _captchaId = grecaptcha.render("recaptcha_holder", {
      sitekey: "6LeaOiITAAAAAF_A-e9qjM6TCgdt4-rqixnkkatL",
      theme: "dark",
      size: 'compact',
      callback: captchaDone,
      "expired-callback": captcha_expired
    });
  };

  captchaDone = function(response) {
    debugger;
    return $("#g-recaptcha-response-1").val(response);
  };

  captcha_expired = function(response) {
    debugger;
  };


  /*
  $("#progress").resizable({
  	resize: () -> 
  		debugger
  		$("#progress-box-header").width( this.width() );
      
  });
   */

  $(document).on('click', '.collapser', function(e) {
    return e.preventDefault();
  }).on('change', '#single-folder', function(e) {
    return $('#single-folder-group').toggle();
  }).on('submit', '#download', function(e) {
    e.preventDefault();
    $('#progress').val('');
    grecaptcha.reset();
    return $.ajax({
      type: "POST",
      url: '/run',
      data: $('#download').serialize()
    });
  });

}).call(this);
